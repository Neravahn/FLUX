<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FLUX - Engine</title>

  <!-- Chart.js + Zoom Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>

  <!--LINK CSS-->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/flux.css') }}">
</head>

<body>
  <div id="main-container">
    <!-- === CHART SECTION === -->
    <div id="chart-section">
      <canvas id="engine-canvas"></canvas>
      <div id="chart-controls">
        <button id="resetZoom">RESET ZOOM</button>
        <button id="downloadChart">DOWNLOAD</button>
        <button id="toggleGrid">TOGGLE GRID</button>
      </div>
    </div>

    <!-- === FORM CONTAINER (scrollable) === -->
    <div id="form-container">
      <!-- === FLUX ENGINE FORM === -->
      <form id="flux-panel">
        <h2>FLUX ENGINE</h2>

        <div class="form-group">
          <label for="ticker">Select Stock</label>
          <select id="ticker" name="ticker" required>
            <option value="">Select a stock...</option>
            <option value="AAPL">Apple (AAPL)</option>
            <option value="GOOGL">Alphabet (GOOGL)</option>
            <option value="MSFT">Microsoft (MSFT)</option>
            <option value="TSLA">Tesla (TSLA)</option>
            <option value="AMZN">Amazon (AMZN)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="interval">Select Interval</label>
          <select id="interval" name="interval" required>
            <option value="">Select interval</option>
            <option value="1d">1 day</option>
            <option value="1h">1 hour</option>
            <option value="15m">15 minutes</option>
            <option value="5m">5 minutes</option>
            <option value="2m">2 minutes</option>
            <option value="1m">1 minute</option>
            <option value="1wk">1 week</option>
            <option value="1mo">1 month</option>
          </select>
        </div>

        <div class="form-group">
          <label for="moving_average">Select Moving Average Type</label>
          <select id="moving_average" name="moving_average">
            <option value="">Select Moving Average</option>
            <option value="sma">Simple Moving Average (SMA)</option>
            <option value="ema">Exponential Moving Average (EMA)</option>
            <option value="wma">Weighted Moving Average (WMA)</option>
            <option value="cma">Cumulative Moving Average (CMA)</option>
            <option value="hma">Hull Moving Average (HMA)</option>
            <option value="tma">Triangular Moving Average (TMA)</option>
            <option value="bollinger_bands">Bollinger Bands</option>
            <optionn value="smma">Smoothed Moving Average</optionn>
            <option value="kama">Kaufman Adaptive Moving Average</option>
            <option value="alma">Arnaud Legoux Moving Average</option>
          </select>
        </div>

        <div class="form-group">
          <label for="window">Enter Window</label>
          <input type="number" id="window" name="window" placeholder="e.g., 20">
        </div>

        <div class="form-group">
          <label for="formula_1">Formula 1</label>
          <textarea id="formula_1" name="formula_1"
            placeholder="e.g., rolling_mean(close, 20) + sqrt(volume)"></textarea>
        </div>

        <div class="form-group">
          <label for="formula_2">Formula 2</label>
          <textarea id="formula_2" name="formula_2"
            placeholder="e.g., rolling_mean(close, 20) - sqrt(volume)"></textarea>
        </div>

        <button type="submit" id="submit_formula">ANALYZE</button>
        <div id="engine-error"></div>
      </form>

      <!-- === ALPHA BETA FORM === -->
      <form id="alphabeta-panel">
        <h2>ALPHA BETA</h2>

        <div class="form-group">
          <label for="ticker_alphabeta">Select Stock</label>
          <select id="ticker_alphabeta" name="ticker_alphabeta" required>
            <option value="AAPL">Apple (AAPL)</option>
            <option value="GOOGL">Alphabet (GOOGL)</option>
            <option value="MSFT">Microsoft (MSFT)</option>
            <option value="TSLA">Tesla (TSLA)</option>
            <option value="AMZN">Amazon (AMZN)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="benchmark">Select Benchmark</label>
          <select id="benchmark" name="benchmark" required>
            <option value="^GSPC">S&P 500 (^GSPC)</option>
            <option value="^NDX">NASDAQ 100 (^NDX)</option>
            <option value="^DJI">Dow Jones (^DJI)</option>
            <option value="^NSEI">NIFTY 50 (^NSEI)</option>
            <option value="^BSESN">SENSEX (^BSESN)</option>
            <option value="BTC-USD">Bitcoin (BTC-USD)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="interval">Select Interval</label>
          <select id="interval_alphabeta" name="interval" required>
            <option value="">Select interval</option>
            <option value="1d">1 day</option>
            <option value="1h">1 hour</option>
            <option value="15m">15 minutes</option>
            <option value="5m">5 minutes</option>
            <option value="2m">2 minutes</option>
            <option value="1m">1 minute</option>
            <option value="1wk">1 week</option>
            <option value="1mo">1 month</option>
          </select>
        </div>

        <button type="button" id="submit_alphabeta">ANALYZE</button>
        <div id="engine-error_alphabeta"></div>
      </form>




      <!--=======NOW ADDING OSCILLATORS===========-->
      <form id="oscillator-panel">
        <h2>OSCILLATORS & MOMENTUM</h2>

        <div class="form-group">
          <label for="ticker_oscillator">Select Stock</label>
          <select id="ticker_oscillator" name="ticker_oscillator" required>
            <option value="AAPL">Apple (AAPL)</option>
            <option value="GOOGL">Alphabet (GOOGL)</option>
            <option value="MSFT">Microsoft (MSFT)</option>
            <option value="TSLA">Tesla (TSLA)</option>
            <option value="AMZN">Amazon (AMZN)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="interval_oscillator">Select Interval</label>
          <select id="interval_oscillator" name="interval_oscillator" required>
            <option value="">Select interval</option>
            <option value="1d">1 day</option>
            <option value="1h">1 hour</option>
            <option value="15m">15 minutes</option>
            <option value="5m">5 minutes</option>
            <option value="2m">2 minutes</option>
            <option value="1m">1 minute</option>
            <option value="1wk">1 week</option>
            <option value="1mo">1 month</option>
          </select>
        </div>

        <div class="form-group">
          <label for="select_oscilaltor">Select Oscillator</label>
          <select id="select_oscillator" name="select_oscillator" required>
            <option value="">Select Oscillator</option>
            <option value="rsi">Relative Strength Index</option>
            <option value="macd">Moving Average Convergence Divergence</option>
            <option value="stochastic">Stochastic Oscillator</option>
            <option value="william_r">William %R</option>
            <option value="roc">Rate of Change</option>
            <option value="trix">Triple Exponential Oscillator</option>
            <option value="cci">Commodity Channel Index</option>
            <option value="mfi">Money Flow Index</option>
            <option value="tsi">True Strength Index</option>
          </select>
        </div>

        <h4>OPTIONAL TUNING</h4>
        <div class="form-group">
          <label for="period_oscillator">Period</label>
          <input type="number" id="period_oscillator" name="period_oscillator" placeholder="Default">
        </div>

        <div class="form-group">
          <label for="fast_oscillator">Fast</label>
          <input type="number" id="fast_oscillator" name="fast_oscillator" placeholder="Default">
        </div>

        <div class="form-group">
          <label for="slow_oscillator">Slow</label>
          <input type="number" id="slow_oscillator" name="slow_oscillator" placeholder="Default">
        </div>

        <div class="form-group">
          <label for="signal_oscillator">Signal</label>
          <input type="number" id="signal_oscillator" name="signal_oscillator" placeholder="Default">
        </div>

        <button type="button" id="submit_oscillator">ANALYZE</button>
        <div id="engine-error_oscillator"></div>

      </form>



      <!--===============VOLUME AND WEIGHTED MEASURES==============-->
      <form id="vwm-panel">
        <h2>VOLUME & WEIGHTED MEASURES</h2>

        <div class="form-group">
          <label for="ticker_vwm">Select Stock</label>
          <select id="ticker_vwm" name="ticker_vwm" required>
            <option value="AAPL">Apple (AAPL)</option>
            <option value="GOOGL">Alphabet (GOOGL)</option>
            <option value="MSFT">Microsoft (MSFT)</option>
            <option value="TSLA">Tesla (TSLA)</option>
            <option value="AMZN">Amazon (AMZN)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="interval_vwm">Select Interval</label>
          <select id="interval_vwm" name="interval_vwm" required>
            <option value="">Select interval</option>
            <option value="1d">1 day</option>
            <option value="1h">1 hour</option>
            <option value="15m">15 minutes</option>
            <option value="5m">5 minutes</option>
            <option value="2m">2 minutes</option>
            <option value="1m">1 minute</option>
            <option value="1wk">1 week</option>
            <option value="1mo">1 month</option>
          </select>
        </div>

        <div class="form-group">
          <label for="vwm">Select VWMs</label>
          <select id="vwm" name="vwm" required>
            <option value="">Select VWMs</option>
            <option value="obv">On-Balance Value</option>
            <option value="vwap">Volume Weighted Average Price</option>
            <option value="cmf">Chaikin Money Flow</option>

          </select>
        </div>
        <div class="form-group">
          <label for="period_vwm">Rolling Window</label>
          <input type="number" id="period_vwm" name="period_vwm" placeholder="Default">
        </div>
        <button type="button" id="submit_vwm">ANALYZE</button>
        <div id="engine-error_vwm"></div>
      </form>



      <!--================VALUE AND RISK==============-->

      <form id="vnr-panel">
        <h2>VOLATILITY & RISK</h2>

        <div class="form-group">
          <label for="ticker_vnr">Select Stock</label>
          <select id="ticker_vnr" name="ticker_vnr" required>
            <option value="AAPL">Apple (AAPL)</option>
            <option value="GOOGL">Alphabet (GOOGL)</option>
            <option value="MSFT">Microsoft (MSFT)</option>
            <option value="TSLA">Tesla (TSLA)</option>
            <option value="AMZN">Amazon (AMZN)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="interval_vnr">Select Interval</label>
          <select id="interval_vnr" name="interval_vnr" required>
            <option value="">Select interval</option>
            <option value="1d">1 day</option>
            <option value="1h">1 hour</option>
            <option value="15m">15 minutes</option>
            <option value="5m">5 minutes</option>
            <option value="2m">2 minutes</option>
            <option value="1m">1 minute</option>
            <option value="1wk">1 week</option>
            <option value="1mo">1 month</option>
          </select>
        </div>

        <div class="form-group">
          <label for="vnr">Select VNR</label>
          <select id="vnr" name="vnr" required>
            <option value="">Select VNR</option>
            <option value="bollinger">Bollinger Bands</option>
            <option value="atr">Average True Range</option>
            <option value="variance">Log Return and Variance</option>
            <option value="sharpe">Sharpe Ratio</option>
            <option value="sortino">Sortino Ratio</option>
            <option value="var">Value at Risk</option>
          </select>
        </div>

        <div class="form-group">
          <label for="window_vnr">Select Window (Optional)</label>
          <input id="window_vnr" type="number" name="window_vnr" placeholder="Default">
        </div>


        <div class="form-group">
          <label for="confidence">Confidence (Optional)</label>
          <input id="confidence" type="number" name="confidence" placeholder="Default">
        </div>

        <div class="form-group">
          <label for="risk_free">Risk Free (Optional)</label>
          <input id="risk_free" type="number" name="risk_free" placeholder="Defaulr">
          </div>

          <button type="button" id="submit_vnr">ANALYZE</button>
          <div id="engine-error_vnr"></div>

      </form>

    </div>

  </div>
  </div>










  <!-- LINK EXTERNAL JAVASCCRIPTS-->
  <script src="{{ url_for('static', filename='js/flux.js') }}"></script>
  <script src="{{ url_for('static', filename='js/alphabeta.js') }}"></script>
  <script src="{{ url_for('static', filename='js/oscillators.js') }}"></script>
  <script src="{{ url_for('static', filename='js/vwm.js')}}"></script>
  <script src="{{ url_for('static', filename='js/vnr.js')}}"></script>
</body>

</html>